import{a as z,aa as J,da as K,i as U,ja as Q,ka as W}from"./chunk-TI2PQS3J.js";import{a as Y}from"./chunk-XRERQNEZ.js";import"./chunk-JQ3F7U5Y.js";import{Aa as M,B as e,C as n,D as l,F as b,Ga as w,Ha as R,K as a,Oa as F,R as v,Sa as N,Ta as k,Ua as L,Za as q,eb as A,hb as B,ia as E,ib as D,j as g,jb as G,k as _,na as m,o as s,oa as S,pa as x,qb as j,r as c,ra as P,s as h,sa as I,sb as H,ta as y,tb as V,va as T,w as d,xa as O}from"./chunk-IBAPA63D.js";import"./chunk-XMAMLXFW.js";import"./chunk-EW67HA6M.js";import"./chunk-WXVXXLBH.js";import"./chunk-EFAAWUSX.js";import"./chunk-GLOUZK3F.js";import"./chunk-N4PXAYQ7.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-NMPY7VJP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{h as u}from"./chunk-B4AJQJMI.js";function Z(t,p){t&1&&(e(0,"p",9),a(1,"El nombre es obligatorio"),n())}function $(t,p){t&1&&(e(0,"p",9),a(1,"El apellido es obligatorio"),n())}function ee(t,p){t&1&&(e(0,"p",9),a(1,"Ingresa un correo v\xE1lido"),n())}function te(t,p){t&1&&(e(0,"p",9),a(1,"El tel\xE9fono es obligatorio"),n())}function ne(t,p){t&1&&(e(0,"p",9),a(1,"La contrase\xF1a debe tener al menos 6 caracteres"),n())}function oe(t,p){t&1&&(e(0,"p",9),a(1,"Las contrase\xF1as no coinciden"),n())}function ie(t,p){t&1&&l(0,"ion-spinner",20)}function ae(t,p){t&1&&(a(0," Crear Cuenta "),l(1,"ion-icon",21))}var Ce=(()=>{class t{constructor(){this.fb=g(T),this.authServicio=g(Y),this.router=g(E),this.toastCtrl=g(j),this.cargando=!1,z({personOutline:W,mailOutline:K,lockClosedOutline:J,callOutline:U,personAddOutline:Q}),this.formulario=this.fb.group({nombre:["",[m.required,m.minLength(2)]],apellido:["",[m.required,m.minLength(2)]],email:["",[m.required,m.email]],telefono:["",[m.required]],contrasena:["",[m.required,m.minLength(6)]],confirmarContrasena:["",[m.required]]})}campoInvalido(r){let i=this.formulario.get(r);return i?i.invalid&&i.touched:!1}contrasenasCoinciden(){let r=this.formulario.get("contrasena")?.value,i=this.formulario.get("confirmarContrasena")?.value;return r===i}registrar(){return u(this,null,function*(){if(!(this.formulario.invalid||!this.contrasenasCoinciden())){this.cargando=!0;try{let{nombre:r,apellido:i,email:o,telefono:C,contrasena:X}=this.formulario.value;this.authServicio.registrar({nombre:r,apellido:i,email:o,telefono:C,contrasena:X,rol:"cliente"}).subscribe({next:f=>u(this,null,function*(){this.cargando=!1,f.exito?(yield this.mostrarExito("\xA1Cuenta creada exitosamente!"),this.router.navigate(["/tabs/inicio"],{replaceUrl:!0})):yield this.mostrarError(f.mensaje||"Error al crear cuenta")}),error:f=>u(this,null,function*(){this.cargando=!1,yield this.mostrarError(f.error?.mensaje||"Error de conexi\xF3n. Int\xE9ntalo de nuevo.")})})}catch{this.cargando=!1,yield this.mostrarError("Error inesperado")}}})}irALogin(){this.router.navigate(["/login"])}mostrarError(r){return u(this,null,function*(){yield(yield this.toastCtrl.create({message:r,duration:3e3,position:"bottom",color:"danger"})).present()})}mostrarExito(r){return u(this,null,function*(){yield(yield this.toastCtrl.create({message:r,duration:2e3,position:"bottom",color:"success"})).present()})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=_({type:t,selectors:[["app-registro"]],standalone:!0,features:[v],decls:50,vars:9,consts:[["slot","start"],["defaultHref","/bienvenida"],[1,"ion-padding"],[1,"registro-container"],[1,"header-section"],[3,"ngSubmit","formGroup"],[1,"formulario-registro"],["name","person-outline","slot","start","color","medium"],["formControlName","nombre","type","text","label","Nombre","labelPlacement","floating","placeholder","Tu nombre"],[1,"error-validacion"],["formControlName","apellido","type","text","label","Apellido","labelPlacement","floating","placeholder","Tu apellido"],["name","mail-outline","slot","start","color","medium"],["formControlName","email","type","email","label","Correo electr\xF3nico","labelPlacement","floating","placeholder","tu@email.com"],["name","call-outline","slot","start","color","medium"],["formControlName","telefono","type","tel","label","Tel\xE9fono","labelPlacement","floating","placeholder","0991234567"],["name","lock-closed-outline","slot","start","color","medium"],["formControlName","contrasena","type","password","label","Contrase\xF1a","labelPlacement","floating","placeholder","M\xEDnimo 6 caracteres"],["slot","end"],["formControlName","confirmarContrasena","type","password","label","Confirmar contrase\xF1a","labelPlacement","floating","placeholder","Repite tu contrase\xF1a"],["expand","block","type","submit",1,"boton-submit",3,"disabled"],["name","crescent"],["slot","end","name","person-add-outline"],[1,"links-adicionales"],["color","primary",3,"click"]],template:function(i,o){i&1&&(e(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),l(3,"ion-back-button",1),n(),e(4,"ion-title"),a(5,"Crear Cuenta"),n()()(),e(6,"ion-content",2)(7,"div",3)(8,"div",4)(9,"h2"),a(10,"\xDAnete a T\xE9cnicoYa"),n(),e(11,"p"),a(12,"Crea tu cuenta como cliente para solicitar servicios"),n()(),e(13,"form",5),b("ngSubmit",function(){return o.registrar()}),e(14,"ion-list",6)(15,"ion-item"),l(16,"ion-icon",7)(17,"ion-input",8),n(),c(18,Z,2,0,"p",9),e(19,"ion-item"),l(20,"ion-icon",7)(21,"ion-input",10),n(),c(22,$,2,0,"p",9),e(23,"ion-item"),l(24,"ion-icon",11)(25,"ion-input",12),n(),c(26,ee,2,0,"p",9),e(27,"ion-item"),l(28,"ion-icon",13)(29,"ion-input",14),n(),c(30,te,2,0,"p",9),e(31,"ion-item"),l(32,"ion-icon",15),e(33,"ion-input",16),l(34,"ion-input-password-toggle",17),n()(),c(35,ne,2,0,"p",9),e(36,"ion-item"),l(37,"ion-icon",15),e(38,"ion-input",18),l(39,"ion-input-password-toggle",17),n()(),c(40,oe,2,0,"p",9),n(),e(41,"ion-button",19),c(42,ie,1,0,"ion-spinner",20)(43,ae,2,0,"ion-icon",21),n()(),e(44,"div",22)(45,"p"),a(46," \xBFYa tienes cuenta? "),e(47,"ion-text",23),b("click",function(){return o.irALogin()}),e(48,"strong"),a(49,"Inicia sesi\xF3n"),n()()()()()()),i&2&&(s(13),h("formGroup",o.formulario),s(5),d(o.campoInvalido("nombre")?18:-1),s(4),d(o.campoInvalido("apellido")?22:-1),s(4),d(o.campoInvalido("email")?26:-1),s(4),d(o.campoInvalido("telefono")?30:-1),s(5),d(o.campoInvalido("contrasena")?35:-1),s(5),d(o.campoInvalido("confirmarContrasena")||!o.contrasenasCoinciden()?40:-1),s(),h("disabled",o.formulario.invalid||!o.contrasenasCoinciden()||o.cargando),s(),d(o.cargando?42:43))},dependencies:[F,N,G,D,M,R,w,H,V,L,q,B,A,k,O,P,S,x,I,y],styles:[".registro-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#fff;margin:0 0 8px}.header-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0}.boton-submit[_ngcontent-%COMP%]{margin-top:24px;--border-radius: 12px;height:50px}.links-adicionales[_ngcontent-%COMP%]{text-align:center;margin-top:24px}.links-adicionales[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium)}.links-adicionales[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{cursor:pointer}"]})}}return t})();export{Ce as RegistroPage};
