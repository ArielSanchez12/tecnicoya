import{a as c}from"./chunk-XRERQNEZ.js";import{a as j}from"./chunk-JQ3F7U5Y.js";import{B as h,C as u,D as v,Da as M,R as g,d as s,da as f,ea as C,fa as A,g as d,ha as P,ia as r,j as n,k as l,ka as b,la as S,ma as T,mb as k,ya as R,za as I}from"./chunk-IBAPA63D.js";import"./chunk-XMAMLXFW.js";import"./chunk-EW67HA6M.js";import"./chunk-WXVXXLBH.js";import"./chunk-EFAAWUSX.js";import"./chunk-GLOUZK3F.js";import"./chunk-N4PXAYQ7.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-NMPY7VJP.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-B4AJQJMI.js";var o=(t,p)=>{let i=n(c),e=n(r),a=i.obtenerToken();return console.log("\u{1F6E1}\uFE0F AuthGuard - Verificando acceso a:",p.url),console.log("\u{1F511} Token existe:",!!a),a?!0:(console.log("\u274C No autenticado, redirigiendo a /login"),e.navigate(["/login"],{queryParams:{returnUrl:p.url}}),!1)};var m=(t,p)=>{let i=n(c),e=n(r),a=i.obtenerToken();return console.log("\u{1F6E1}\uFE0F InvitadoGuard - Token existe:",!!a),a?(console.log("\u{1F504} Usuario ya autenticado, redirigiendo a /tabs/inicio"),e.navigate(["/tabs/inicio"],{replaceUrl:!0}),!1):!0};var y=[{path:"",redirectTo:"bienvenida",pathMatch:"full"},{path:"bienvenida",loadComponent:()=>import("./chunk-KD43NMRK.js").then(t=>t.BienvenidaPage),canActivate:[m]},{path:"login",loadComponent:()=>import("./chunk-SS4YCLF2.js").then(t=>t.LoginPage),canActivate:[m]},{path:"registro",loadComponent:()=>import("./chunk-MS5Z73MN.js").then(t=>t.RegistroPage),canActivate:[m]},{path:"registro-tecnico",loadComponent:()=>import("./chunk-AOHKZA7C.js").then(t=>t.RegistroTecnicoPage),canActivate:[m]},{path:"tabs",loadComponent:()=>import("./chunk-FIFU7Y3Q.js").then(t=>t.TabsPage),canActivate:[o],children:[{path:"",redirectTo:"inicio",pathMatch:"full"},{path:"inicio",loadComponent:()=>import("./chunk-QHVMCB6F.js").then(t=>t.InicioPage)},{path:"buscar",loadComponent:()=>import("./chunk-CU7CVEXJ.js").then(t=>t.BuscarPage)},{path:"servicios",loadComponent:()=>import("./chunk-OIOIO4PW.js").then(t=>t.MisServiciosPage)},{path:"trabajos",loadComponent:()=>import("./chunk-6X4F3ND3.js").then(t=>t.MisTrabajosPage)},{path:"perfil",loadComponent:()=>import("./chunk-YBPXEJOC.js").then(t=>t.PerfilPage)}]},{path:"nuevo-servicio",loadComponent:()=>import("./chunk-ADNHMXOY.js").then(t=>t.NuevoServicioPage),canActivate:[o]},{path:"servicio/:id",loadComponent:()=>import("./chunk-Q3XSCHA7.js").then(t=>t.DetalleServicioPage),canActivate:[o]},{path:"editar-servicio/:id",loadComponent:()=>import("./chunk-RBVU27CM.js").then(t=>t.EditarServicioPage),canActivate:[o]},{path:"tecnico/:id",loadComponent:()=>import("./chunk-NOPPDWRM.js").then(t=>t.PerfilTecnicoPage),canActivate:[o]},{path:"nueva-cotizacion/:id",loadComponent:()=>import("./chunk-KUHIYYD6.js").then(t=>t.NuevaCotizacionPage),canActivate:[o]},{path:"editar-cotizacion/:id",loadComponent:()=>import("./chunk-KUHIYYD6.js").then(t=>t.NuevaCotizacionPage),canActivate:[o]},{path:"trabajo/:id",loadComponent:()=>import("./chunk-4EMVZQMP.js").then(t=>t.DetalleTrabajoPage),canActivate:[o]},{path:"completar-trabajo/:id",loadComponent:()=>import("./chunk-M7I4DGBF.js").then(t=>t.NuevaResenaPage),canActivate:[o]},{path:"chat/:id",loadComponent:()=>import("./chunk-G2KRW5NO.js").then(t=>t.ChatPage),canActivate:[o]},{path:"nueva-resena/:id",loadComponent:()=>import("./chunk-M7I4DGBF.js").then(t=>t.NuevaResenaPage),canActivate:[o]},{path:"fidelizacion",loadComponent:()=>import("./chunk-BOHVKZBE.js").then(t=>t.FidelizacionPage),canActivate:[o]},{path:"mis-resenas",loadComponent:()=>import("./chunk-NOMVLEX7.js").then(t=>t.MisResenasPage),canActivate:[o]},{path:"mapa-tecnicos",loadComponent:()=>import("./chunk-MP2MYYF3.js").then(t=>t.MapaTecnicosPage),canActivate:[o]},{path:"editar-perfil",loadComponent:()=>import("./chunk-UN5IV6SI.js").then(t=>t.EditarPerfilPage),canActivate:[o]},{path:"tecnico-instantaneo",loadComponent:()=>import("./chunk-HCCQPPA4.js").then(t=>t.TecnicoInstantaneoPage),canActivate:[o]},{path:"mis-trabajos",loadComponent:()=>import("./chunk-6X4F3ND3.js").then(t=>t.MisTrabajosPage),canActivate:[o]},{path:"mis-servicios",loadComponent:()=>import("./chunk-OIOIO4PW.js").then(t=>t.MisServiciosPage),canActivate:[o]},{path:"notificaciones",loadComponent:()=>import("./chunk-3CTV6J2Y.js").then(t=>t.NotificacionesPage),canActivate:[o]},{path:"membresias",loadComponent:()=>import("./chunk-FUMM3QCG.js").then(t=>t.MembresiasPage),canActivate:[o]},{path:"configuracion",loadComponent:()=>import("./chunk-JAGFNS7V.js").then(t=>t.ConfiguracionPage),canActivate:[o]},{path:"ayuda",loadComponent:()=>import("./chunk-L2WRC4VF.js").then(t=>t.AyudaPage),canActivate:[o]},{path:"terminos",loadComponent:()=>import("./chunk-T4AMUEOA.js").then(t=>t.TerminosPage),canActivate:[o]},{path:"privacidad",loadComponent:()=>import("./chunk-BZ5FJRCQ.js").then(t=>t.PrivacidadPage),canActivate:[o]},{path:"retirar-fondos",loadComponent:()=>import("./chunk-24OO3IX2.js").then(t=>t.RetirarFondosPage),canActivate:[o]},{path:"**",redirectTo:"bienvenida"}];var x=(()=>{class t{constructor(){this.authServicio=n(c)}ngOnInit(){this.restaurarSesion()}restaurarSesion(){this.authServicio.obtenerToken()&&(console.log("\u{1F504} Restaurando sesi\xF3n..."),this.authServicio.verificarAutenticacion().subscribe({next:e=>{e.exito?console.log("\u2705 Sesi\xF3n restaurada correctamente"):console.log("\u274C Token inv\xE1lido, cerrando sesi\xF3n")},error:e=>{console.error("\u274C Error al verificar sesi\xF3n:",e)}}))}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=l({type:t,selectors:[["app-root"]],standalone:!0,features:[g],decls:2,vars:0,template:function(e,a){e&1&&(h(0,"ion-app"),v(1,"ion-router-outlet"),u())},dependencies:[M,I],encapsulation:2})}}return t})();var E="tecnicoya_token",N=(t,p)=>{let i=n(r),e=localStorage.getItem(E);return e&&(t=t.clone({setHeaders:{Authorization:`Bearer ${e}`}})),p(t).pipe(d(a=>(a.status===401&&(localStorage.removeItem(E),localStorage.removeItem("tecnicoya_usuario"),i.navigate(["/login"])),a.status===403&&console.error("Acceso denegado"),s(()=>a))))};j.produccion&&void 0;A(x,{providers:[{provide:P,useClass:R},k({mode:"md",animated:!0}),S(y,T(b)),f(C([N]))]});
